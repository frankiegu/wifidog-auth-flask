{% extends 'layouts/default.html' %}

{% set title = 'Vouchers' %}

{% block content %}
<div id="{{ resource_name}}-index">
    <div class="flakes-actions-bar">
        {% include 'resources/actions.html' %}
    </div>

    {% if instances %}
    <table class="flakes-table">
        <colgroup>
            <col span="1" style="width: 20px">
        </colgroup>
        <thead>
            <tr>
                <th class="checkbox"></th>
                <th class="code">Code</th>
                <th class="name">Name</th>
                <th class="status">S</th>
                <th class="times">Times</th>
                <th class="minutes">Minutes Left</th>
                <th class="traffic">Traffic (MB)</th>
            </tr>
        </thead>
        <tbody>
            {% for instance in instances %}
            <tr data-id="{{ instance.id }}">
                <td><input type="checkbox"></td>
                <td class="code" data-label="Code">{{ instance.code }}</td>
                <td class="name" data-label="Name">{{ instance.name or '-' }}</td>
                <td class="status" data-label="Status"><span class="oi" data-glyph="{{ status_icons[instance.status] }}" title="{{ instance.status }}" aria-hidden="true"></span></td>
                <td class="times" data-label="Times">
                    {{ instance.created_at.strftime('%H:%M') }}
                </td>
                <td class="minutes" data-label="Minutes Left">
                    {% if instance.status == 'active' %}
                    {{ instance.time_left }} /
                    {% else %}
                    {% endif %}
                    {{ instance.minutes }}
                </td>
                <td class="traffic" data-label="Traffic">{{ instance.incoming | bytes }} in; {{ instance.outgoing | bytes }} out; {{ (instance.incoming + instance.outgoing) | bytes }} both</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}
