{% extends 'layouts/default.html' %}

{% set title = 'Vouchers' %}

{% block content %}
<h1>Vouchers</h1>

<div id="vouchers-index">
    <div class="flakes-actions-bar">
        <a class="action button-gray smaller right" href="/new-voucher">
            <span class="oi" data-glyph="file" title="New Voucher" aria-hidden="true"></span>
            New Voucher
        </a>
    </div>

    {% if instances %}
    <table class="flakes-table">
        <colgroup>
            <col span="1" style="width: 20px">
        </colgroup>
        <thead>
            <tr>
                <th class="checkbox"></th>
                <th>Code</th>
                <th>Name</th>
                <th>S</th>
                <th>Times</th>
                <th class="right">Minutes Left</th>
                <th style="text-align:right">Traffic (MB)</th>
            </tr>
        </thead>
        <tbody class="list">
            {% for instance in instances %}
            <tr data-id={{ instance.id }}>
                <td><input type="checkbox"></td>
                <td class="code" data-label="Code">{{ instance.code }}</td>
                <td class="name" data-label="Name">{{ instance.name or '-' }}</td>
                <td class="status" data-label="Status"><span class="oi" data-glyph="{{ status_icons[instance.status] }}" title="{{ instance.status }}" aria-hidden="true"></span></td>
                <td data-label="Times">
                    {{ instance.created_at.strftime('%H:%M:%S') }}
                </td>
                <td class="right" data-label="Minutes Left">
                    {% if instance.status == 'active' %}
                    {{ instance.time_left }} /
                    {% else %}
                    {% endif %}
                    {{ instance.minutes }}
                </td>
                <td data-label="Traffic" style="text-align:right">{{ instance.incoming | bytes }} in; {{ instance.outgoing | bytes }} out; {{ (instance.incoming + instance.outgoing) | bytes }} both</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}
